---
# File Name: Template-scRNA-Seq.config.yaml
# Created By: ZW
# Created On: 2023-07-03
# Purpose: Configuration for the scRNA-Seq pipeline run on 10X EHT
#   scRNAseq genomics data generated by the Nobrega and McNally Labs

DOC_TYPE: "GLOBAL_CONFIG"
analysis_name: "<analysis-name>"
working_directory: "</working-directory/>"
directories: {
  fastq_directory: "</full/path/to/fastq-dir/>",
  align_directory: "</path/to/data/directory/alignments-sub-dir/>",
  data_directory: "</path/to/data/directory/>",
  plot_directory: "</path/to/results/plots-directory/>",
  scripts_directory: "</working-directory/scripts-directory/>",
  logs_directory: "</path/to/logs-directory/>",
  reference_directory: "</path/to/reference/genome-directory/>",
  scratch_directory: "</scratch-directory/>"
}
files:  {
  integration_manifest: "<path/to/Template-integration_manifest.txt>",
  sequencing: [
    {
      run_id: "<run_id_1>",
      library_id: "<lib_id_1>",
      sample_type: "<sample_type_1>",
      fastq_directory: "<directory/containing/fastqs/run_1_fastqs/>"
    },
    {
      run_id: "<run_id_2>",
      library_id: "<lib_id_2>",
      sample_type: "<sample_type_2>",
      fastq_directory: "<directory/containing/fastqs/run_2_fastqs/>"
    },
    {
      run_id: "<run_id_3>",
      library_id: "<lib_id_3>",
      sample_type: "<sample_type_3>",
      fastq_directory: "<directory/containing/fastqs/run_3_fastqs/>"
    },
  ]
}
---
DOC_TYPE: "RULE_CONFIG" 
rule_name: "CellRanger_Count"
resources: {
  walltime: "12:00:00",
  nodes: 2,
  cpus_per_node: 10,
  total_memory_mb: 55000
}
parameters: {
  checkfiles: [
    "cloupe.cloupe", "possorted_genome_bam.bam", "possorted_genome_bam.bam.bai", "metrics_summary.csv", "web_summary.html", "filtered_feature_bc_matrix/barcodes.tsv.gz", "filtered_feature_bc_matrix/features.tsv.gz", "filtered_feature_bc_matrix/matrix.mtx.gz", "molecule_info.h5", "filtered_feature_bc_matrix.h5", "raw_feature_bc_matrix.h5", "raw_feature_bc_matrix/barcodes.tsv.gz", "raw_feature_bc_matrix/features.tsv.gz", "raw_feature_bc_matrix/matrix.mtx.gz"],
  localcores: 18,
  localmemgb: 95
}
---
DOC_TYPE: "RULE_CONFIG"
rule_name: "Scrublet_Doublet_Detect"
resources: {
  walltime: "00:30:00",
  nodes: 1,
  cpus_per_node: 4,
  total_memory_mb: 8000
},
parameters: {
  doublet_prior_rate: 0.05
}
---
DOC_TYPE: "RULE_CONFIG" 
rule_name: "Integrate_Datasets"
resources: {
  walltime: "2:00:00",
  nodes: 1,
  cpus_per_node: 10,
  total_memory_mb: 32000
}
parameters: {
  extra_args: ""
}
